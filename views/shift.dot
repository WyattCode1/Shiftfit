{{#def.header}}

<section id="cta">
    <h2>{{=it.i18n('shift_title')}}</h2>
    {{?it.shift}}
        {{=it.i18n('change_shift')}}
    {{??}}
        {{=it.i18n('new_shift')}}
    {{?}}



    <form style="margin-left: 777px;" id="shiftForm">
        <div>
            <div class="row uniform 50%">
                <div class="8u 12u(mobilep)">
                    <input type="text" name="name" id="name" placeholder="Name" />
                </div>
                <div class="8u 12u(mobilep)">
                    <a id="save" class="button" onclick="submit()">{{=it.i18n('create')}}</a>
                    {{?it.shift}}<a href="/shift" class="button" onclick="">{{=it.i18n('cancel')}}</a>{{?}}
                </div>
            </div>
        </div>
    </form>

    <br />

    {{?it.shifts}}
    <section class="box">
        <div class="table-wrapper">
            <table>
                <thead>
                    <tr>
                        <td>Name</td>
                        <td>Action</td>
                    </tr>
                </thead>
                <tbody>
                {{~ it.shifts:sf:index}}
                    <tr>
                        <td>{{=sf.name}}</td>
                        <td><a href="/shift/{{=sf.id}}">Modify</a></td>
                    </tr>
                {{~}}
                </tbody>
            </table>
        </div>
    </section>
    {{?}}



    <script>
        {{?it.shift}}
            $('#name').val("{{=it.shift.name}}");
            $('#save').html("{{=it.i18n('modify')}}");
            var url = '/shift/{{=it.shift.id}}';
        {{??}}
            var url = '/shift';
        {{?}}
        function submit() {
            clean_error_messages(['name']);
            $.ajax({
                type: 'POST',
                url: url,
                data: $('#shiftForm').serialize(),
                success: function (data, data2) {
                    window.location.href = '/shift';
                },
                error: function (data) {
                    clean_error_messages(['name']);
                    var responseText = JSON.parse(data.responseText);
                    show_error_messages(responseText);
                }
            });
        }
    </script>


</section>

{{#def.footer}}